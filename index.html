<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>xlu_py</title>
  <meta charset="utf-8" />
  <link rel="stylesheet" type="text/css" href="css/main.css" />
  <link rel="stylesheet" type="text/css" href="css/normalize.css" />
  <link rel="stylesheet" type="text/css" href="css/ghp.css" />
</head>
<body>
<div class="content">
<h1 class="libTop">xlu_py</h1>

<h2>Command Line Utilities</h2>
<p>At this time all of these are intended for use in managing the
content-keyed data store.  Conventioally this is in a directory called
<code>U/</code> or <code>uDir/</code>.  The path to the store is <code>u_path</code> and the object used
to manage the store is <code>u_dir</code>.</p>
<h3>gen_node</h3>
<pre><code>usage: gen_node_id [-h] [-j] [-o OUT_PATH] [-s SUB_DIR] [-1] [-2] [-3] [-B]
                   [-u U_PATH] [-v]

generate a quasi-random node ID for U based on contents of a subdirectory

optional arguments:
  -h, --help            show this help message and exit
  -j, --just_show       show options and exit
  -o OUT_PATH, --out_path OUT_PATH
                        destination directory
  -s SUB_DIR, --sub_dir SUB_DIR
                        subdirectory to use for hashing (00 through ff)
  -1, --using_sha1      using the 160-bit SHA1 hash
  -2, --using_sha2      using the 256-bit SHA2 (SHA256) hash
  -3, --using_sha3      using the 256-bit SHA3 (Keccak-256) hash
  -B, --using_blake2b   using the 256-bit BLAKE2B hash
  -u U_PATH, --u_path U_PATH
                        path to uDir
  -v, --verbose         be chatty
</code></pre>
<h3>u_consolidate</h3>
<pre><code>usage: u_consolidate [-h] [-b BASE_DIR] [-i IN_DIR] [-j] [-n MAX_COUNT]
                     [-o OUT_DIR] [-v] [-w] [-z]

move valid files from input U subdirectory to output subdir

optional arguments:
  -h, --help            show this help message and exit
  -b BASE_DIR, --base_dir BASE_DIR
                        base directory holding U subdirectories
  -i IN_DIR, --in_dir IN_DIR
                        source U directory
  -j, --just_show       show options and exit
  -n MAX_COUNT, --max_count MAX_COUNT
                        number of files to move; -1 = all of them
  -o OUT_DIR, --out_dir OUT_DIR
                        destination U directory
  -v, --verbose         be chatty
  -w, --writing         overwrite existing files
  -z, --dont_do_it      don't do anything, just say what you would do
</code></pre>
<h3>u_preen</h3>
<pre><code>usage: u_preen [-h] [-b B_DIR] [-g GROUP] [-j] [-u USER] [-v]

regularize permissions in a U directory structure

optional arguments:
  -h, --help            show this help message and exit
  -b B_DIR, --b_dir B_DIR
                        path to U directory to be preened (default=/var/U)
  -g GROUP, --group GROUP
                        group (default jdd)
  -j, --just_show       show options and exit
  -u USER, --user USER  user (login, default jdd)
  -v, --verbose         be chatty
</code></pre>
<h3>u_re_struc</h3>
<pre><code>usage: u_re_struc [-h] [-j] [-o OUT_PATH] [-s NEW_STRUC_NAME] [-u U_PATH] [-v]

modify directory structure for uDir; low-level op, does not alter L

optional arguments:
  -h, --help            show this help message and exit
  -j, --just_show       show options and exit
  -o OUT_PATH, --out_path OUT_PATH
                        optional destination directory
  -s NEW_STRUC_NAME, --new_struc_name NEW_STRUC_NAME
                        new dirStruc, one of ['DIR_FLAT', 'DIR16x16',
                        'DIR256x256']
  -u U_PATH, --u_path U_PATH
                        path to uDir (no default)
  -v, --verbose         be chatty
</code></pre>
<h3>u_stats</h3>
<p>A utility for displaying information on content-keyed data storage
directories.  Typical ouput looks like:</p>
<pre><code>statistics for /var/app/sharedev/U
  dirStruc:           DIR256x256
  hashtype:          HashTypes.SHA1

  subDirectories:            256
  subSubDirectories:       22659
  leaf files:              27910
  odd files:                   1
  largest leaf file:     8860904
  unexpected at top:           0
</code></pre>
<p>The second line reports the directory structure, the third that the
content keys are calculated using SHA1.</p>
<p>The command <code>u_stats -h</code> returns:</p>
<pre><code>usage: u_stats [-h] [-j] [-o OUT_PATH] [-u U_PATH] [-v]

display statistical information on content-keyed directory at u_path

optional arguments:
  -h, --help            show this help message and exit
  -j, --just_show       show options and exit
  -o OUT_PATH, --out_path OUT_PATH
                        destination directory
  -u U_PATH, --u_path U_PATH
                        source U directory (default=/var/U)
  -v, --verbose         be chatty
</code></pre>
<h3>verify_content</h3>
<pre><code>usage: verify_content_keys [-h] [-j] [-t] [-T] [-V] [-1] [-2] [-3] [-B]
                           [-u U_PATH] [-v]

optional arguments:
  -h, --help            show this help message and exit
  -j, --just_show       show args and exit
  -t, --show_timestamp  show run timestamp
  -T, --testing         test run - write to ./testU
  -V, --show_version    show version number and date
  -1, --using_sha1      using the 160-bit SHA1 hash
  -2, --using_sha2      using the 256-bit SHA2 (SHA256) hash
  -3, --using_sha3      using the 256-bit SHA3 (Keccak-256) hash
  -B, --using_blake2b   using the 256-bit BLAKE2B hash
  -u U_PATH, --u_path U_PATH
                        path to uDir
  -v, --verbose         be chatty
</code></pre>
<h2>Project Status</h2>
<p>Pre-alpha.  Just split from xlattice_py as a separate project.</p>
<h2>Licensing</h2>
<p><a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a><br />The material on this github.io website is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</p>
<p>Project software is licensed under an MIT license.
Follow the SOFTWARE LICENSE link below for more information on project software licensing.</p>  <div class="f">
    <hr />
    <div class="license">
      <p><a href="LICENSE-MIT.html">SOFTWARE LICENSE</a></p>
    </div>
    <div class="project">
      github <a href="https://github.com/jddixon/xlu_py">      <img src="img/GitHub-Mark-32px.png" 
        alt="link to project"  
        style="display: inline-block; margin-left: 0 auto; margin-right: 0 auto">
       </a> project
    </div>
    <div class="logo" >
      <a href="https://jddixon.github.io/xlattice/">
      <img src="img/xlattice-2014.jpg" alt="the XLattice Project" style="float: right;" >
      </a>
    </div>
  </div>
</div>
</body>
</html>
